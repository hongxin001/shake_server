{"version":3,"sources":["crawler.js"],"names":[],"mappings":";;;;;;;;;AASA,YAAY,CAAC;AACb,IAAI,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AACjC,IAAI,UAAU,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;AACvC,IAAM,EAAE,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;AACjC,IAAM,IAAI,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAE/B,IAAI,GAAG,GAAG,EAAE,CAAC;;AAEb,GAAG,CAAC,IAAI,GAAG,UAAC,GAAG,EAAE,GAAG,EAAK;;AAErB,QAAI,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;;;AAGlB,cAAU,CACL,GAAG,CAAC,iBAAiB,CAAC,CACtB,GAAG,CAAC,UAAU,GAAG,EAAE,IAAI,EAAE;AACtB,YAAI,GAAG,EAAE;AACL,mBAAO,IAAI,CAAC,GAAG,CAAC,CAAC;SACpB;AACD,YAAI,KAAK,GAAG,EAAE,CAAC;AACf,YAAI,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAChC,SAAC,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,UAAU,GAAG,EAAE,OAAO,EAAE;AACnC,gBAAI,KAAK,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,CAAC;AAC9B,gBAAI,SAAS,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;;AAExC,gBAAI,MAAM,GAAG,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;AACrC,gBAAI,GAAG,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,WAAW,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;AAC9C,iBAAK,CAAC,IAAI,CAAC;AACP,qBAAK,EAAE,KAAK;AACZ,mBAAG,EAAE,GAAG;aACX,CAAC,CAAC;SACN,CAAC,CAAC;AACH,WAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KACnB,CAAC,CAAC;CACV,CAAC;;AAEF,MAAM,CAAC,OAAO,GAAG,GAAG,CAAC","file":"crawler-compiled.js","sourcesContent":["/**\n * Created by WebStorm.\n * User: aaron\n * Date: 15/11/30\n * Time: 20:37\n */\n\n// 一些工具方法\n\n'use strict';\nvar cheerio = require('cheerio');\nvar superagent = require('superagent');\nconst AV = require('leanengine');\nconst tool = require('./tool');\n\nlet pub = {};\n\npub.show = (req, res) => {\n    // 控制台输出\n    tool.l('crawler');\n\n    // 爬虫\n    superagent\n        .get('http://yx8.com/')\n        .end(function (err, sres) {\n            if (err) {\n                return next(err);\n            }\n            var games = [];\n            var $ = cheerio.load(sres.text);\n            $('h2 a').each(function (idx, element) {\n                var title = $(element).text();\n                var urlOrigin = $(element).attr('href');\n                // 处理字符串\n                var urlArr = urlOrigin.split('com/');\n                var url = urlArr[0] + \"com/game/\" + urlArr[1];\n                games.push({\n                    title: title,\n                    url: url\n                });\n            });\n            res.send(games);\n        });\n};\n\nmodule.exports = pub;\n"]}